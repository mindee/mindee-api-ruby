require 'uri'
require 'net/http'
require 'net/https'

url = URI('https://api.mindee.net/v1/products/mindee/my-endpoint/my-version/predict')
file = '/path/to/the/file.ext'

http = Net::HTTP.new(url.host, url.port)
http.use_ssl = true

request = Net::HTTP::Post.new(url)
request['Authorization'] = 'Token my-api-key'
request.set_form([['document', File.open(file)]], 'multipart/form-data')

response = http.request(request)
if !(200..399).include?(response.code)
  raise response.msg
end
puts response.read_body
